<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HAMMER: HAMMER</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HAMMER
   </div>
   <div id="projectbrief">Happy Analyzers Make Many Experimental Results</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">HAMMER </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="http://hammer.lucascorcodilos.com/">Full Documentation</a></p>
<p>HAMMER is an easy-to-use and fast python analysis framework used to quickly process CMS data sets. Default arguments assume the use of the NanoAOD format but any ROOT TTree can be processed.</p>
<h2>The RDataFrame Backbone</h2>
<p>HAMMER's speed comes from the use of <a href="https://root.cern/doc/master/classROOT_1_1RDataFrame.html">ROOT's RDataFrame</a>. RDataFrame offers "multi-threading and other low-level optimisations" which make analysis level processing faster and more efficient than traditional python <code>for</code> loops. However, RDataFrame derives its speed from its C++ back-end and while an RDataFrame object can be instantiated and manipulated in python, any actions on it are written in C++ (even if you're using python).</p>
<h2>No more <code>for</code> loops</h2>
<p>Using RDataFrame means a fundamental re-thinking of how we treat a block of data or simulation. Instead of looping over the events or entries of a TTree (or other data format), the TTree is converted into a table called the "data frame". A user then books a number of "lazy" actions on the data frame such as filtering out events or calculating new values. These actions aren't performed though until the data frame needs to be evaluated (ex. you ask to plot a histogram from it).</p>
<p>In this way, there are no more <code>for</code> loops and instead just actions on the data frame table that transform it into a final table of values that the analyzer cares about.</p>
<h2>Anatomy of a data frame</h2>
<p>Each row of the table is a separate event and each column is a different variable in the event (a branch in TTree terms). Columns can be single values or vectors (specifically <a href="https://root.cern.ch/doc/v614/classROOT_1_1VecOps_1_1RVec.html">ROOT::VecOps:RVec</a>).</p>
<p>Since each row is an event, vectors are necessary for the case of multiple of the same physics object in an event - for example, multiple electrons.</p>
<p><b>NOTE</b> NanoAOD orders these vectors in <img class="formulaInl" alt="$p_T$" src="form_0.png"/> of the objects. So if you'd like the <img class="formulaInl" alt="$\eta$" src="form_1.png"/> of the leading electron, it is stored as <code>Electron_eta[0]</code></p>
<p>This can make accessing values tricky! For example, if there's one electron in an event and the analyzer asks for <code>Electron_eta[1]</code>, the computer will return a seg fault. These are the types of problems that HAMMER attempts to solve (even if it's just by users sharing their experiences).</p>
<h2>Happy Analyzers</h2>
<p>HAMMER is meant to keep both the processing fast via RDataFrame and the analyzer fast via python scripting.</p>
<p>To maintain python's appeal in HEP as a quick scripting language, HAMMER handles many of the intricacies of interfacing with RDataFrame so the analyzer can focus on writing their analysis.</p>
<p>HAMMER automates opening one or many ROOT files, calculating the number of events generated (provided the ROOT files are NanoAOD simulation), loading in C++ scripts for use while looping over the data frame, and grouping actions for easy manipulation.</p>
<p>In addition, HAMMER treats each step in the RDataFrame processing as a "node" and keeps track of these nodes. Each action (or group of actions) performed on a node produces another node and nodes store information about their parents or children. This makes it possible to write tools like <code>Nminus1()</code> which takes as input a node and a group of cuts to apply and returns N new nodes, each with every cut but one applied.</p>
<p>Finally, the RDataFrame for each node is always kept easily accessible so that any of the <a href="https://root.cern/doc/master/classROOT_1_1RDataFrame.html">native RDataFrame tools</a> are at the user's fingertips.</p>
<h2>Sharing is caring</h2>
<p>HAMMER includes a repository of common algorithms used frequently in CMS which access scale factors, calculate pileup weights, and more. These are all written in C++ for use in <code>Cut</code> and <code>Define</code> arguments and are provided so that users have a common tool box to share. Additionally, the AnalysisModules folder welcomes additions of custom C++ modules on a per-analysis basis so that the code can be properly archived for future reference and for sharing with other analyzers. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
